# PCP与SRP：实时同步协议比较

## 一、概览

PCP（优先级天花板协议）和SRP（栈资源策略）都旨在解决实时系统中的优先级倒置问题。尽管它们的目标相似，但采用的方法和应用场景有显著差异。

## 优先级天花板协议 (PCP)

### 特点

- **天花板优先级**：每个资源被赋予一个天花板优先级，即所有可能访问该资源的任务中最高的优先级。
- **优先级提升**：当任务访问资源时，其优先级临时提升至该资源的天花板优先级。
- **适用环境**：广泛应用于单核和多核实时操作系统中，有效防止死锁。

### 优势

- 提供稳定且可预测的资源访问管理方法。
- 固定的优先级设置简化了系统配置和维护。

## 二、栈资源策略 (SRP)

### 特点

- **系统上限**：使用系统上限的概念，根据系统中活跃任务的最高优先级动态调整。
- **动态调整**：随着任务的激活和终止，资源的优先级实时调整。
- **适用环境**：特别适用于多核环境，任务优先级频繁变化的场景。

### 优势

- 能够动态适应任务集的变化，为复杂系统中的资源管理提供灵活性。
- 通过有效管理不同核心的资源访问，减少调度延迟。

## 三、主要区别

- **优先级管理**：
  - **PCP**：资源的天花板优先级固定，除非重新配置，否则不会因任务变动而改变。
  - **SRP**：系统上限优先级动态调整，可以根据任务的实时变化进行调整。

- **适应性与灵活性**：
  - **PCP**：适用于任务和资源相对固定的环境，提供稳定可靠的优先级管理。
  - **SRP**：适合动态变化的环境，可以灵活应对任务频繁变动的情况。

- **实施复杂性**：
  - **PCP**：实施相对简单直接，因为资源优先级一旦设置，管理机制相对固定。
  - **SRP**：需要更复杂的逻辑来动态调整系统上限，可能需要更多的系统资源来维护这种动态性。


