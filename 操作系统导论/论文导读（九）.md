# An algorithm for scheduling certifiable mixed - criticality sporadic task systems -- 混合关键度零星任务系统调度算法

## 一、论文背景

* 安全关键嵌入式系统通常需要认证，而当前许多系统将多种功能集成在一个平台上，只有部分功能是安全关键的且需要认证，这类混合关键度系统的出现带来了一些调度问题。
* 传统EDF调度可能导致系统无法通过认证，而一种新的调度策略既能通过认证又能满足所有截止日期。

## 二、相关定义

* MC作业 ：每个作业由5元组参数表征，包括释放时间、截止时间、关键度、低关键度WCET估计和高关键度WCET估计。定义了低关键度负载ℓLO(I)和高关键度负载ℓHI(I)的计算公式。
* MC零星任务 ：每个零星任务也由5元组参数表征，包括关键度、低关键度WCET、高关键度WCET、相对截止时间和周期。
* 调度MC零星任务系统 ：定义了调度零星任务系统的正确性准则，即如果所有作业表现出低关键度行为，则所有作业都能在截止日期前完成；如果任何作业表现出高关键度行为，则所有高关键度作业都能在截止日期前完成。
* OCBP调度算法 ：介绍了先前工作中用于调度MC实例的OCBP算法，包括其优先级分配的递归过程和相关性质。

## 三、调度

### 3.1、需要解决的问题

一是任务可能无限多导致优先级计算无法在运行前完成，二是任务的释放时间和截止时间事先未知。

### 3.2、计算OCBP优先级 

在运行时的某个瞬间开始繁忙间隔时，为所有可能在该间隔内调度的作业分配优先级，并根据**OCBP优先级分配方案**进行调度。当出现某些事件时，如作业执行超过低关键度WCET、处理器空闲或有更高优先级作业抢占等，需要进行相应的处理，包括丢弃低关键度作业、重新计算优先级等。

```
OCBP优先级分配方案的具体步骤如下：
1. 确定最低优先级作业：对于给定的MC实例I，判断一个作业Ji能否被分配最低优先级的条件是：如果Ji是低关键度作业（χi = LO），且当其他所有作业Jj具有更高优先级并执行cj(LO)时间单位时，其释放时间和截止时间之间至少有ci(LO)时间可用。如果Ji是高关键度作业（χi = HI），且当其他所有作业Jj具有更高优先级并执行cj(HI)时间单位时，其释放时间和截止时间之间至少有ci(HI)时间可用。
2. 递归分配优先级：在确定最低优先级作业后，将该作业从集合中排除，然后在剩余的作业集合上重复上述步骤，直到所有作业都被分配了优先级，或者在某次迭代中没有作业符合最低优先级的条件（此时算法报告失败，该实例不可被OCBP调度）。
```

### 3.3、繁忙间隔大小限制

通过分析最长繁忙间隔的组成部分，得出其长度的上限，从而限制在该间隔内可能到达的作业数量。

## 四、结论

本文将先前关于独立作业的混合关键度工作负载的研究扩展到了由递归过程生成的更一般的混合关键度工作负载，扩展了零星任务模型和OCBP调度算法，尽管存在复杂性，但表明了独立作业的可调度性条件可以推广到零星任务。




