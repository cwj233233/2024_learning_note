# Preemptive Scheduling of Multi - Criticality Systems with Varying Degrees of Execution Time Assurance
  
![alt text](4.jpg)



## 一、背景知识
  
- schedulability analysis（可调度性分析）只能在模型假设在实际系统中得到保证的程度上保证任务的截止日期得到满足，而确定任务的精确WCET值非常困难。

- 论文基于一个**猜想**：对任务执行时间界限的保证程度要求越高（对错过截止日期的容忍度越低），在实践中该界限往往变得越大、越保守。

## 二、多关键分析与调度

* 引入设计保证级别集合L，为每个任务指定设计保证级别Li和一组计算时间Cil（下面的计算公式会用到）
* 修改Joseph - Pandya最坏情况响应时间算法进行多临界分析，通过迭代计算得到任务的最坏情况响应时间Ri。
    * **Joseph - Pandya最坏情况响应时间算法**：
    是一种用于计算任务在抢占式固定优先级（PFP）调度下最坏情况响应时间的算法。  
    
        计算公式如下  
    ![](https://markdown.liuchengtu.com/work/uploads/upload_7925a251ab5db018f1b1fb4b8782c18c.png)
    
    在最坏情况下，当任务τi被调度时，同时所有具有更高优先级的任务也被调度。这个方程会累加从这个所谓的关键瞬间开始，直到所有这些工作完成的最早时间点，为任务τi和所有更高优先级任务分派的所有工作。这个最早的时间点就是Ri的最小不动点。计算过程是先将变量Ri初始化为CiLi，然后反复评估等式右边来更新Ri，直到Ri的值不再改变或Ri > Di。在后一种情况下，任务集被认为在给定的优先级分配下是不可调度或不可行的。
    
    ![](https://markdown.liuchengtu.com/work/uploads/upload_20a4dbde0bcb6a11af4ebd1e667204e7.png)表示任务在保证级别为时的计算时间
    
* 按照结束时间直接进行优先级分配对于多临界调度问题不是最优的，周期变换（Perio transformation）技术可通过修改工作负载来提供流畅的降级，从而提高多临界可调度性。


* **修改多临界分析方程来进行周期变换：**
原先的调度公式在上面已经给出，为了进行周期变换，对该方程进行了如下修改：在每次迭代的固定点计算中，如果任务已被变换，则![](https://markdown.liuchengtu.com/work/uploads/upload_aae791868e792a553b11f82679d29635.png)表示到Ri为止的变换后的调度次数。每个这样的调度对应于原始未变换任务的一次完整执行，此时假设实际只需要![](https://markdown.liuchengtu.com/work/uploads/upload_dce8cda56149ce966d6873918cb27139.png)而不是![](https://markdown.liuchengtu.com/work/uploads/upload_185ab7e32a566e35aca797876242d2a0.png)


* **将Audsley的优先级分配算法应用于多临界调度问题的方法：**
Audsley的优先级分配算法基于以下两个观察结果：
  
    - 引理1：任务的最坏情况响应时间可以通过知道哪些任务子集具有比该任务更高的优先级来确定（而无需知道它们的具体优先级分配）。
    - 引理2：如果任务在给定的优先级分配下是可调度的，那么如果它被分配更高的优先级（其他任务优先级保持不变），它仍然是可调度的。


    * <font class="text-color-1" color="#f44336">**算法流程**</font>：开始时，没有任务被分配优先级。优先级从最低到最高调度优先级进行分配，因此第一个被分配优先级的任务将是最低优先级任务。在每一步，从仍然缺乏优先级分配的任务中选择一个任务，并分配下一个更高的优先级。在每一步选择的任务是那些如果被分配下一个更高优先级将是可调度的任务中的任何一个。根据引理1，这可以在不知道剩余任务将被分配的确切优先级的情况下确定，只需要知道剩余任务最终将获得更高的优先级。该算法在任何步骤中如果剩余的任务都不可调度，则终止失败；当所有任务都被分配了优先级时，则成功终止。引理2确保如果存在任何可行的优先级分配，算法将找到它；在任何步骤中未被选择的可调度任务不会因为等待并在以后的步骤中分配给它们更高的优先级而变得不可调度。
    
    * 将Audsley的算法修改为在每一步都使用多临界可调度性分析，那么结果就是一个用于多临界调度问题的优先级分配算法。在每一步中，在所有可行的选择中，选择具有最大临界缩放因子的那个


## 三、评估

从三个时间分区的航空电子系统获得处理器工作负载数据，构建多临界工作负载进行评估
